Here’s the distilled Audit Summary & Hypothesis for today’s notes, based on the completed checklist review:

⸻

📝 Audit Summary – 2025-08-20

✅ What We Learned
	•	Manifest (index.json)
	•	Periods list (2023-01 → 2025-07) is complete, but the path pattern mismatches the real folder layout (likely missing the YYYY/ subdir).
	•	coverage is blank, date_field undeclared, grain change not documented → these omissions weaken loader logic.
	•	Currently blocks anything outside July because loader only “sees” what manifest + pattern declares.
	•	Loader (orders/loadRows.js + loaderRegistry.js)
	•	Range branch is hardcoded to only load the latest_period (July 2025), then relies on downstream filters.
	•	This is the direct cause of the “July-only” choke point.
	•	LoaderRegistry does expand periods from range, but if loadRows ignores that and just pulls latest, nothing beyond July can ever load.
	•	Table layer (tableDataRegistry.js)
	•	Range criteria is forwarded correctly.
	•	applyDateAndLimit trims rows using isWithinRange.
	•	No bug here – it will filter correctly if loader actually delivers rows across multiple months.
	•	Utilities (timeRanges.js)
	•	Solid for building ranges.
	•	But expects normalized YYYY-MM-DD or Date; any inconsistency (string vs Date vs timestamp) may cause silent drop.
	•	This is secondary → the bigger block is loader not supplying rows.
	•	State + Panels (controlsContext & TimePanel)
	•	Staging/committing model is wired correctly.
	•	Potential mismatch: Panel stores Date objects while table filter expects strings. This could cause filtering inconsistencies once loader is fixed.

🎯 Root Hypothesis
	•	The July-only data issue is caused by loadRows ignoring range expansion and defaulting to latest_period.
	•	The secondary risk is manifest path mismatch: even if loader expands, wrong filename pattern means fetches will 404 outside July.
	•	Once loader is fixed to expand range → months list, and manifest path pattern matches the real disk layout, the pipeline should finally deliver rows across full order history.
	•	Small polish (normalize staged range to strings, add date_field in manifest) will reduce silent filter bugs later.

⸻

🔍 Key Hypotheses to Test
	1.	Loader Range Fix
	•	Implement multi-month expansion in loadRows when criteria.range is present.
	•	Confirm logs show multiple months being fetched (not just July).
	2.	Manifest Alignment
	•	Update filename_pattern or add path_pattern to reflect YYYY/YYYY-MM_orders_in_store.csv.
	•	Fill coverage.start / coverage.end to match periods.
	3.	Date Normalization
	•	Ensure loader normalizes "Order Date/Time" → Date object or YYYY-MM-DD string consistently.
	•	Ensure TimePanel stages the same type to avoid mismatches in isWithinRange.
	4.	Downstream Filter Verification
	•	Once loader + manifest deliver multiple months, verify table shows rows clipped to exact custom range.

⸻
